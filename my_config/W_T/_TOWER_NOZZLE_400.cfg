[gcode_macro _TOWER_NOZZLE_400]
description:  weipe tower for nozzle 0.400 mm  layer 0.200 mm
gcode:

  {% set user_vars = printer["gcode_macro VARIABLE"] %}  
  ### define layer  
  {% set new_z =  params.LAYER |float %}
  {% set layer_nr = ((new_z|float / 0.200)|round(0))|int %}
  
    # {action_respond_info(" tool: %s  Z:%s " % ( user_vars.active_tool , new_z))}   
  
 # === wipe tower object 20x20 mm  ============== 
 
###  first layer for new active tool
  {% if new_z == 0.200 %}  
 G1  Z{new_z} F7800
  
 G1 F15000
 G1  X6.750 Y6.000  
 G4 P0
 G1  Y6.500 
 G1  X-7.250  E0.6279 F713
 G1 F15000
 G4 P0
 G92 E0
 G1  X-7.000 Y-7.000   F7200
 G1  X7.000  E0.5321 F2160
 G1  Y6.000  E0.4941
 G1  X-7.000  E0.5321
 G1  Y-7.000  E0.4941
 G1  X7.000 
 G1  Y6.000 
 G1  X6.000 
 G1  Y5.500  E0.0190
 G1  X-6.500  E0.4751
 G1  Y5.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y4.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y4.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y3.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y3.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y2.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y2.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y1.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y1.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y0.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y0.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-0.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-1.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-1.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-2.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-2.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-3.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-3.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-4.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-4.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-5.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-5.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-6.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-6.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y-7.000  E0.0190
 G1  X-7.500 
 G1  Y-7.500 
 G1  X7.500  E0.5701
 G1  Y7.000  E0.5511
 G1  X-7.500  E0.5701
 G1  Y-7.500  E0.5511
 G1  X-7.957 
 G1  Y-7.957 
 G1  X7.957  E0.6048
 G1  Y7.457  E0.5858
 G1  X-7.957  E0.6048
 G1  Y-7.957  E0.5858
 G1  X-8.414 
 G1  Y-8.414 
 G1  X8.414  E0.6396
 G1  Y7.914  E0.6206
 G1  X-8.414  E0.6396
 G1  Y-8.414  E0.6206
 G1  X-8.871 
 G1  Y-8.871 
 G1  X8.871  E0.6743
 G1  Y8.371  E0.6553
 G1  X-8.871  E0.6743
 G1  Y-8.871  E0.6553
 G1  X-9.328 
 G1  Y-9.328 
 G1  X9.328  E0.7091
 G1  Y8.828  E0.6901
 G1  X-9.328  E0.7091
 G1  Y-9.328  E0.6901
 

 ### even layer for active tool
  {% elif layer_nr is even %} 
 G1  X-8.000 Y-8.000
 G1  Z{new_z} F7800  

 G1 F15000
 G1  X-6.750 Y-6.500 
 G4 P0
 G1  Y-7.000 
 G1  X7.250  E0.5321 F1584
 G1  X6.500 Y-6.500   E0.0343
 G1  X-7.250  E0.5226 F1800
 G1  X-6.500 Y-6.000   E0.0343
 G1  X6.500  E0.4941 F2198
 G1  Y-5.500  E0.0190
 G1  X-6.500  E0.4941 F4200
 G1  Y-5.000  E0.0190
 G1  X7.250  E0.5226 F4250
 G1  X6.500 Y-4.500   E0.0343
 G1  X-7.250  E0.5226 F4300
 G1  X-6.500 Y-4.000   E0.0343
 G1  X6.500  E0.4941 F4350
 G1  Y-3.500  E0.0190
 G1  X-6.500  E0.4941 F4400
 G1  Y-3.000  E0.0190
 G1  X7.250  E0.5226 F4450
 G1  X6.500 Y-2.500   E0.0343
 G1  X-7.250  E0.5226 F4500
 G1  X-6.500 Y-2.000   E0.0343
 G1  X6.500  E0.4941 F4550
 G1  Y-1.500  E0.0190
 G1  X-6.500  E0.4941 F4600
 G1  Y-1.000  E0.0190
 G1  X7.250  E0.5226 F4650
 G1  X6.500 Y-0.500   E0.0343
 G1  X-7.250  E0.5226 F4700
 G1  X-6.500 Y0.000   E0.0343
 G1  X6.500  E0.4941 F4750
 G1  Y0.500  E0.0190
 G1  X-6.500  E0.4941 F4800
 G1  Y1.000  E0.0190
 G1  X7.250  E0.5226
 G1  X6.500 Y1.500   E0.0343
 G1  X-7.250  E0.5226
 G1  X-6.500 Y2.000   E0.0343
 G1  X6.500  E0.4941
 G1  Y2.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y3.000  E0.0190
 G1  X7.250  E0.5226
 G1  X6.500 Y3.500   E0.0343
 G1  X-7.250  E0.5226
 G1  X-6.500 Y4.000   E0.0343
 G1  X6.500  E0.4941
 G1  Y4.500  E0.0190
 G1  X-6.500  E0.4941
 G1  Y5.000  E0.0190
 G1  X7.250  E0.5226
 G1  X6.500 Y5.500   E0.0343
 G1  X-7.250  E0.5226
 G1  X-6.500 Y6.000   E0.0343
 G1  X6.500  E0.4941
 G1  Y6.500  E0.0190
 G1  X-6.500  E0.4941
 G1 F15000
 G4 P0
 G92 E0
 G1  X-7.000 Y-7.500   F7200
 G1  X-7.500 
 G1  X7.500  E0.5701 F2900
 G1  Y7.000  E0.5511
 G1  X-7.500  E0.5701
 G1  Y-7.500  E0.5511

### odd layer for active tool
   {% elif layer_nr is odd  %} 
 G1  X8.000 Y8.000
 G1  Z{new_z} F7800  

 G1 F15000
 G1  X6.750 Y6.000  
 G4 P0
 G1  Y6.500 
 G1  X-7.250  E0.5321 F1584
 G1  X-6.500 Y6.000   E0.0343
 G1  X7.250  E0.5226 F1800
 G1  X6.500 Y5.500   E0.0343
 G1  X-6.500  E0.4941 F2198
 G1  Y5.000  E0.0190
 G1  X6.500  E0.4941 F4200
 G1  Y4.500  E0.0190
 G1  X-7.250  E0.5226 F4250
 G1  X-6.500 Y4.000   E0.0343
 G1  X7.250  E0.5226 F4300
 G1  X6.500 Y3.500   E0.0343
 G1  X-6.500  E0.4941 F4350
 G1  Y3.000  E0.0190
 G1  X6.500  E0.4941 F4400
 G1  Y2.500  E0.0190
 G1  X-7.250  E0.5226 F4450
 G1  X-6.500 Y2.000   E0.0343
 G1  X7.250  E0.5226 F4500
 G1  X6.500 Y1.500   E0.0343
 G1  X-6.500  E0.4941 F4550
 G1  Y1.000  E0.0190
 G1  X6.500  E0.4941 F4600
 G1  Y0.500  E0.0190
 G1  X-7.250  E0.5226 F4650
 G1  X-6.500 Y0.000   E0.0343
 G1  X7.250  E0.5226 F4700
 G1  X6.500 Y-0.500   E0.0343
 G1  X-6.500  E0.4941 F4750
 G1  Y-1.000  E0.0190
 G1  X6.500  E0.4941 F4800
 G1  Y-1.500  E0.0190
 G1  X-7.250  E0.5226
 G1  X-6.500 Y-2.000   E0.0343
 G1  X7.250  E0.5226
 G1  X6.500 Y-2.500   E0.0343
 G1  X-6.500  E0.4941
 G1  Y-3.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-3.500  E0.0190
 G1  X-7.250  E0.5226
 G1  X-6.500 Y-4.000   E0.0343
 G1  X7.250  E0.5226
 G1  X6.500 Y-4.500   E0.0343
 G1  X-6.500  E0.4941
 G1  Y-5.000  E0.0190
 G1  X6.500  E0.4941
 G1  Y-5.500  E0.0190
 G1  X-7.250  E0.5226
 G1  X-6.500 Y-6.000   E0.0343
 G1  X7.250  E0.5226
 G1  X6.500 Y-6.500   E0.0343
 G1  X-6.500  E0.4941
 G1  Y-7.000  E0.0190
 G1  X6.500  E0.4941
 G1 F15000
 G4 P0
 G92 E0
 G1  X7.000   F7200
 G1  X7.500 
 G1  Y-7.500 
 G1  Y7.000  E0.5511 F2900
 G1  X-7.500  E0.5701
 G1  Y-7.500  E0.5511
 G1  X7.500  E0.5701

  
 {% endif %}

# ===  end wipe tower object  ===================  
