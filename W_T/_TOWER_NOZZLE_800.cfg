[gcode_macro _TOWER_NOZZLE_800]
description:  weipe tower for nozzle 0.800 mm layer 0.200 mm
gcode:

  {% set user_vars = printer["gcode_macro VARIABLE"] %}  
  ### define layer  
  {% set new_z =  params.LAYER |float %}
  {% set layer_nr = ((new_z|float / 0.200)|round(0))|int %}
  
     # {action_respond_info(" tool: %s  Z:%s " % ( user_vars.active_tool , new_z))}  
  
 # === wipe tower object 20x20 mm  ============== 
 
###  first layer for new active tool
  {% if new_z == 0.200 %}  
 G1  Z{new_z} F7800
 
 G1 F15000
 G1  X6.000 Y4.500  

 G4 P0
 G1  Y5.500 
 G1  X-7.000  E1.2208 F713
 G1 F15000
 G4 P0
 G92 E0
 G1  X-6.500 Y-6.500   F7200
 G1  X6.500  E1.0346 F2160
 G1  Y4.500  E0.8754
 G1  X-6.500  E1.0346
 G1  Y-6.500  E0.8754
 G1  X6.500 
 G1  Y4.500 
 G1  X4.500 
 G1  Y3.500  E0.0796
 G1  X-5.500  E0.7958
 G1  Y2.500  E0.0796
 G1  X5.500  E0.8754
 G1  Y1.500  E0.0796
 G1  X-5.500  E0.8754
 G1  Y0.500  E0.0796
 G1  X5.500  E0.8754
 G1  Y-0.500  E0.0796
 G1  X-5.500  E0.8754
 G1  Y-1.500  E0.0796
 G1  X5.500  E0.8754
 G1  Y-2.500  E0.0796
 G1  X-5.500  E0.8754
 G1  Y-3.500  E0.0796
 G1  X5.500  E0.8754
 G1  Y-4.500  E0.0796
 G1  X-5.500  E0.8754
 G1  Y-5.500  E0.0796
 G1  X5.500  E0.8754
 G1  Y-6.500  E0.0796
 G1  X7.500 
 G1  Y-7.500 
 G1  Y6.500  E1.1141
 G1  X-7.500  E1.1937
 G1  Y-7.500  E1.1141
 G1  X7.500  E1.1937
 G1  X8.457 
 G1  Y-8.457 
 G1  Y7.457  E1.2665
 G1  X-8.457  E1.3461
 G1  Y-8.457  E1.2665
 G1  X8.457  E1.3461
 G1  X9.414 
 G1  Y-9.414 
 G1  Y8.414  E1.4188
 G1  X-9.414  E1.4984
 G1  Y-9.414  E1.4188
 G1  X9.414  E1.4984
 

 ### even layer for active tool
  {% elif layer_nr is even %} 
 G1  X-8.000 Y-8.000
 G1  Z{new_z} F7800  

 G1 F15000
 G1  X-6.000 Y-5.500  
 G4 P0
 G1  Y-6.500 
 G1  X7.000  E1.0346 F1584
 G1  X5.500 Y-5.500   E0.1435
 G1  X-7.000  E0.9948 F1800
 G1  X-5.500 Y-4.500   E0.1435
 G1  X5.500  E0.8754 F2198
 G1  Y-3.500  E0.0796
 G1  X-5.500  E0.8754 F4200
 G1  Y-2.500  E0.0796
 G1  X7.000  E0.9948 F4250
 G1  X5.500 Y-1.500   E0.1435
 G1  X-7.000  E0.9948 F4300
 G1  X-5.500 Y-0.500   E0.1435
 G1  X5.500  E0.8754 F4350
 G1  Y0.500  E0.0796
 G1  X-5.500  E0.8754 F4400
 G1  Y1.500  E0.0796
 G1  X7.000  E0.9948 F4450
 G1  X5.500 Y2.500   E0.1435
 G1  X-7.000  E0.9948 F4500
 G1  X-5.500 Y3.500   E0.1435
 G1  X5.500  E0.8754 F4550
 G1  Y4.500  E0.0796
 G1  X-5.500  E0.8754 F4600
 G1  Y5.500  E0.0796
 G1  X7.000  E0.9948 F4650
 G1 F15000
 G4 P0
 G92 E0
 G1  X6.500 Y-7.500   F7200
 G1  X-6.500 
 G1  X-7.500 
 G1  X7.500  E1.1937 F2900
 G1  Y6.500  E1.1141
 G1  X-7.500  E1.1937
 G1  Y-7.500  E1.1141

### odd layer for active tool
   {% elif layer_nr is odd  %} 
 G1  X8.000 Y8.000
 G1  Z{new_z} F7800  

 G1 F15000
 G1  X6.000 Y4.500  
 G4 P0
 G1  Y5.500 
 G1  X-7.000  E1.0346 F1584
 G1  X-5.500 Y4.500   E0.1435
 G1  X7.000  E0.9948 F1800
 G1  X5.500 Y3.500   E0.1435
 G1  X-5.500  E0.8754 F2198
 G1  Y2.500  E0.0796
 G1  X5.500  E0.8754 F4200
 G1  Y1.500  E0.0796
 G1  X-7.000  E0.9948 F4250
 G1  X-5.500 Y0.500   E0.1435
 G1  X7.000  E0.9948 F4300
 G1  X5.500 Y-0.500   E0.1435
 G1  X-5.500  E0.8754 F4350
 G1  Y-1.500  E0.0796
 G1  X5.500  E0.8754 F4400
 G1  Y-2.500  E0.0796
 G1  X-7.000  E0.9948 F4450
 G1  X-5.500 Y-3.500   E0.1435
 G1  X7.000  E0.9948 F4500
 G1  X5.500 Y-4.500   E0.1435
 G1  X-5.500  E0.8754 F4550
 G1  Y-5.500  E0.0796
 G1  X5.500  E0.8754 F4600
 G1  Y-6.500  E0.0796
 G1  X-7.000  E0.9948 F4650
 G1 F15000
 G4 P0
 G92 E0
 G1  X-6.500   F7200
 G1  X6.500 
 G1  X7.500 
 G1  Y-7.500 
 G1  Y6.500  E1.1141 F2900
 G1  X-7.500  E1.1937
 G1  Y-7.500  E1.1141
 G1  X7.500  E1.1937

  
 {% endif %}

# ===  end wipe tower object  ===================  
